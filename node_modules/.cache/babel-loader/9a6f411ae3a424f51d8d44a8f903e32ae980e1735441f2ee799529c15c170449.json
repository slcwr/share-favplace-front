{"ast":null,"code":"import { createSlice } from '@reduxjs/toolkit';\nimport CartItems from '../../CartItem';\n\n// CartItem 型の定義（仮の例）\n\nconst initialState = {\n  cartItems: CartItems,\n  // 型アサーションを追加\n  total: 0,\n  amount: 0\n};\n// const initialState: CartState = {\n//   cartItems: CartItems,\n//   total: 0,\n//   amount: 0,\n// };\n\nconst cartSlice = createSlice({\n  name: 'cart',\n  initialState,\n  reducers: {\n    clearCart: state => {\n      state.cartItems = state.cartItems.map(item => {\n        item.amount = 0;\n        return item;\n      });\n    },\n    removeItem: (state, action) => {\n      state.cartItems = state.cartItems.map(item => {\n        if (item.id === action.payload) item.amount = 0;\n        return item;\n      });\n    },\n    addItem: (state, action) => {\n      const newItem = {\n        ...action.payload,\n        id: state.cartItems.length + 1,\n        amount: 0\n      };\n      state.cartItems.push(newItem);\n    },\n    increase: (state, action) => {\n      const cartItem = state.cartItems.find(item => item.id === action.payload);\n      if (cartItem) {\n        cartItem.amount = (cartItem.amount || 0) + 1;\n      }\n    },\n    decrease: (state, action) => {\n      const cartItem = state.cartItems.find(item => item.id === action.payload);\n      if (cartItem) {\n        cartItem.amount = (cartItem.amount || 0) - 1;\n      }\n    },\n    calculateTotals: state => {\n      let amount = 0;\n      let total = 0;\n      state.cartItems.forEach(item => {\n        amount += item.amount || 0;\n        total += (item.amount || 0) * item.price;\n      });\n      state.amount = amount;\n      state.total = total;\n    }\n  }\n});\nexport const {\n  clearCart,\n  removeItem,\n  addItem,\n  increase,\n  decrease,\n  calculateTotals\n} = cartSlice.actions;\nexport default cartSlice.reducer;","map":{"version":3,"names":["createSlice","CartItems","initialState","cartItems","total","amount","cartSlice","name","reducers","clearCart","state","map","item","removeItem","action","id","payload","addItem","newItem","length","push","increase","cartItem","find","decrease","calculateTotals","forEach","price","actions","reducer"],"sources":["/Users/a.y/work/share-favplace-front/src/features/cart/cartSlice.tsx"],"sourcesContent":["import { createSlice, PayloadAction } from '@reduxjs/toolkit';\nimport CartItems from '../../CartItem';\n\n// CartItem 型の定義（仮の例）\ninterface CartItem {\n  id?: number;\n  title: string;\n  price: number;\n  img: string;\n  amount?: number;\n}\n\ninterface CartState {\n  cartItems: CartItem[];\n  total: number;\n  amount: number;\n}\n\n\nconst initialState: CartState = {\n    cartItems: CartItems as CartItem[], // 型アサーションを追加\n    total: 0,\n    amount: 0,\n  };\n// const initialState: CartState = {\n//   cartItems: CartItems,\n//   total: 0,\n//   amount: 0,\n// };\n\nconst cartSlice = createSlice({\n  name: 'cart',\n  initialState,\n  reducers: {\n    clearCart: (state) => {\n      state.cartItems = state.cartItems.map((item) => {\n        item.amount = 0;\n        return item;\n      });\n    },\n    removeItem: (state, action: PayloadAction<number>) => {\n      state.cartItems = state.cartItems.map((item) => {\n        if (item.id === action.payload) item.amount = 0;\n        return item;\n      });\n    },\n    addItem: (state, action: PayloadAction<CartItem>) => {\n      const newItem = { ...action.payload, id: state.cartItems.length + 1, amount: 0 };\n      state.cartItems.push(newItem);\n    },\n    increase: (state, action: PayloadAction<number>) => {\n      const cartItem = state.cartItems.find((item) => item.id === action.payload);\n      if (cartItem) {\n        cartItem.amount = (cartItem.amount || 0) + 1;\n      }\n    },\n    decrease: (state, action: PayloadAction<number>) => {\n      const cartItem = state.cartItems.find((item) => item.id === action.payload);\n      if (cartItem) {\n        cartItem.amount = (cartItem.amount || 0) - 1;\n      }\n    },\n    calculateTotals: (state) => {\n      let amount = 0;\n      let total = 0;\n      state.cartItems.forEach((item) => {\n        amount += item.amount || 0;\n        total += (item.amount || 0) * item.price;\n      });\n      state.amount = amount;\n      state.total = total;\n    },\n  },\n});\n\nexport const { clearCart, removeItem, addItem, increase, decrease, calculateTotals } = cartSlice.actions;\nexport default cartSlice.reducer;\n"],"mappings":"AAAA,SAASA,WAAW,QAAuB,kBAAkB;AAC7D,OAAOC,SAAS,MAAM,gBAAgB;;AAEtC;;AAgBA,MAAMC,YAAuB,GAAG;EAC5BC,SAAS,EAAEF,SAAuB;EAAE;EACpCG,KAAK,EAAE,CAAC;EACRC,MAAM,EAAE;AACV,CAAC;AACH;AACA;AACA;AACA;AACA;;AAEA,MAAMC,SAAS,GAAGN,WAAW,CAAC;EAC5BO,IAAI,EAAE,MAAM;EACZL,YAAY;EACZM,QAAQ,EAAE;IACRC,SAAS,EAAGC,KAAK,IAAK;MACpBA,KAAK,CAACP,SAAS,GAAGO,KAAK,CAACP,SAAS,CAACQ,GAAG,CAAEC,IAAI,IAAK;QAC9CA,IAAI,CAACP,MAAM,GAAG,CAAC;QACf,OAAOO,IAAI;MACb,CAAC,CAAC;IACJ,CAAC;IACDC,UAAU,EAAEA,CAACH,KAAK,EAAEI,MAA6B,KAAK;MACpDJ,KAAK,CAACP,SAAS,GAAGO,KAAK,CAACP,SAAS,CAACQ,GAAG,CAAEC,IAAI,IAAK;QAC9C,IAAIA,IAAI,CAACG,EAAE,KAAKD,MAAM,CAACE,OAAO,EAAEJ,IAAI,CAACP,MAAM,GAAG,CAAC;QAC/C,OAAOO,IAAI;MACb,CAAC,CAAC;IACJ,CAAC;IACDK,OAAO,EAAEA,CAACP,KAAK,EAAEI,MAA+B,KAAK;MACnD,MAAMI,OAAO,GAAG;QAAE,GAAGJ,MAAM,CAACE,OAAO;QAAED,EAAE,EAAEL,KAAK,CAACP,SAAS,CAACgB,MAAM,GAAG,CAAC;QAAEd,MAAM,EAAE;MAAE,CAAC;MAChFK,KAAK,CAACP,SAAS,CAACiB,IAAI,CAACF,OAAO,CAAC;IAC/B,CAAC;IACDG,QAAQ,EAAEA,CAACX,KAAK,EAAEI,MAA6B,KAAK;MAClD,MAAMQ,QAAQ,GAAGZ,KAAK,CAACP,SAAS,CAACoB,IAAI,CAAEX,IAAI,IAAKA,IAAI,CAACG,EAAE,KAAKD,MAAM,CAACE,OAAO,CAAC;MAC3E,IAAIM,QAAQ,EAAE;QACZA,QAAQ,CAACjB,MAAM,GAAG,CAACiB,QAAQ,CAACjB,MAAM,IAAI,CAAC,IAAI,CAAC;MAC9C;IACF,CAAC;IACDmB,QAAQ,EAAEA,CAACd,KAAK,EAAEI,MAA6B,KAAK;MAClD,MAAMQ,QAAQ,GAAGZ,KAAK,CAACP,SAAS,CAACoB,IAAI,CAAEX,IAAI,IAAKA,IAAI,CAACG,EAAE,KAAKD,MAAM,CAACE,OAAO,CAAC;MAC3E,IAAIM,QAAQ,EAAE;QACZA,QAAQ,CAACjB,MAAM,GAAG,CAACiB,QAAQ,CAACjB,MAAM,IAAI,CAAC,IAAI,CAAC;MAC9C;IACF,CAAC;IACDoB,eAAe,EAAGf,KAAK,IAAK;MAC1B,IAAIL,MAAM,GAAG,CAAC;MACd,IAAID,KAAK,GAAG,CAAC;MACbM,KAAK,CAACP,SAAS,CAACuB,OAAO,CAAEd,IAAI,IAAK;QAChCP,MAAM,IAAIO,IAAI,CAACP,MAAM,IAAI,CAAC;QAC1BD,KAAK,IAAI,CAACQ,IAAI,CAACP,MAAM,IAAI,CAAC,IAAIO,IAAI,CAACe,KAAK;MAC1C,CAAC,CAAC;MACFjB,KAAK,CAACL,MAAM,GAAGA,MAAM;MACrBK,KAAK,CAACN,KAAK,GAAGA,KAAK;IACrB;EACF;AACF,CAAC,CAAC;AAEF,OAAO,MAAM;EAAEK,SAAS;EAAEI,UAAU;EAAEI,OAAO;EAAEI,QAAQ;EAAEG,QAAQ;EAAEC;AAAgB,CAAC,GAAGnB,SAAS,CAACsB,OAAO;AACxG,eAAetB,SAAS,CAACuB,OAAO","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}